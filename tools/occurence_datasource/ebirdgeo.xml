<tool id="rebirdgeo" name="Ebirdgeo" version="0.1">
    <requirements>
        <requirement type="package" version="0.4.0">r-rebird</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        Rscript 
         '$__tool_directory__/ebirdgeo.R' '$sname' $lati $lon $dist_km $nb_days $maxi 
    ]]></command>

    <inputs>
        <param name="sname" type="text" label="Scientific name" value="Genus species"/>
        <param name="lati" type="float" label="Latitude" value="0.0"/>
        <param name="lon" type="float" label="Longitude" value="0.0"/>
        <param name="dist_km" type="integer" label="Distance defining radius of interest from given lat/lng in kilometers" value="25" />
        <param name="nb_days" type="integer" label="Number of days back to look for observations 1-30" value="14"/>
        <param name="maxi" type="integer" label="Number max of occurence to return (1-10000)" value="50"/>
    </inputs>
    <outputs>
        <data name="output" format="tabular" from_work_dir="content_data.tab" label="${tool.name} on ${on_string}"/>
    </outputs>
    <tests>
        <test>
            <param name="sname" value="spinus tristis"/>
            <param name="lati" value="42.0"/>
            <param name="lon" value="-76.0"/>
            <param name="dist_km" value="25"/>
            <param name="nb_days" value="30"/>
            <output name="output" file="res_ebirdgeo.tab" ftype="tabular" />
        </test>
    </tests>

    <help><![CDATA[
========
ebirdgeo
========

This tool is inspired by the Rpackage rebird but does not use the official version yet (https://cran.r-project.org/web/packages/rebird/index.html).

|
        
**What it does**

Returns the most recent sighting date and specific location for the requested species of bird reported
within the number of days specified and reported in the specified area.

|

**How to use it**

Specify a species by its scientific name (Genus species) and add geographic informations.

|

**Output**

The output file is a tabular with the following header : "lng", "locName", "howMany", "sciName", "obsValid", "locationPrivate", "obsDt", "obsReviewed", "lat", "locID", "locId"

It details the observation place and the number of observations.

    ]]></help>
</tool>

