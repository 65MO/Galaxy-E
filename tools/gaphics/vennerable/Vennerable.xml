<tool id="Vennerable" name="Vennerable" version="1.2c" >
	<description>: Représentation de données dans un diagramme de Venn ou d'Edwards/Venn-like</description>
	<command>
		R --slave --vanilla --file=\$VENNERABLE_SCRIPT_PATH/vennerable/Vennerable.R 
		--args $inputFile
		#if $opt.userSpecified == "Yes" 
			default
		#else
			"$opt.xNames"
		#end if
		$weighting
		#if $imagetype.value == "svg"
			$outputFile_svg
			$plottype
			$resolution
			svg
		#else if $imagetype.value == "png"
			$outputFile_png
			$plottype
			$resolution
			png
		#else
			$outputFile_pdf
			$plottype
			$resolution
			pdf
		#end if
		2&gt;$Vennerable_log
		1&gt;&gt;$Vennerable_log
	</command>	
	<inputs>
		<param name="inputFile" format="tabular" type="data" label="Data set" />
		<conditional name="opt">
			<param name="userSpecified" type="select" label="Use column headers as dataset names?">
				<option value="Yes">Yes</option>
				<option value="No">No</option>
			</param>
			<when value="Yes">
			</when>
			<when value="No">
				<param name="xNames" type="text" label="Alternative data names" value="A,B,C,D" help="(comma-separated)"/>
			</when>
		</conditional>
		<param name="plottype" type="select" label="Plot type to use" help="some other options might get disabled for certain plottypes" >
			<option value="AWFE" selected="True">AWFE: Edwards-Venn (Non-weighted up to 5 datasets)</option>
			<option value="ChowRuskey">Chow-Ruskey (always weigthed max 9 sets common intersect not 0)</option>
			<option value="ellipses">Ellipses (4 datasets only and always non-weighted)</option>
			<option value="circles">Circles (max 3 datasets)</option>
			<option value="squares">Squares (max 4 datasets non-weighted)</option>
            <option value="battle">Edwards-Venn Squares battle (max 9 datasets, non-weighted)</option>
		</param>
		<param name="weighting" type="select" label="Use weighting for data in plot" >
			<option value="FALSE" selected="True">Non-weighted</option>
			<option value="TRUE">Weighted</option>
		</param>
		<param name="resolution" type="integer" label="Resolution to use (dpi)" value="150" help="Plot features can be sized with this setting (PNG only). Lower (50) is larger text.&lt;br /&gt;&lt;i&gt;Default is vector graphics format SVG!&lt;/i&gt;" />
        <param name="imagetype" type="select" label="Image output format" help="Scalable Vector Graphics (SVG) format is best for post processing" >
            <option value="pdf" selected="True">PDF</option>
            <option value="svg">SVG</option>
            <option value="png">PNG</option>
        </param>
	</inputs>
	<outputs>
		<data name="outputFile_svg" format="svg" label="Venn diagram svg of ${inputFile.name}">
			<filter>imagetype=="svg"</filter>
		</data>
		<data name="outputFile_png" format="png" label="Venn diagram png of ${inputFile.name}">
			<filter>imagetype=="png"</filter>
		</data>
		<data name="outputFile_pdf" format="pdf" label="Venn diagram pdf of ${inputFile.name}">
			<filter>imagetype=="pdf"</filter>
		</data>
		<data name="Vennerable_log" format="tabular" label="Vennerable output and error log file" />
	</outputs>
	<tests>
		<test>
		</test>
	</tests>
	<requirements>
 		<requirement type="package" version="3.0.3">R</requirement>
		<requirement type="package" version="1.0">vennerable_r_packages</requirement>
		<requirement type="set_environment">VENNERABLE_SCRIPT_PATH</requirement>
	</requirements>
	<help>
| 


**What it does**

Vennerable V3.0 (07-10-2014)

This tool will use the Vennerable R package to plot data as weighted or un-weighted diagrams such as Venn, Edwards-Venn and Chow-Rusky. 

The tool can take from 2 to 9 collumns (in battle mode) of data but more are adviced not to be used (for speed and clarity).

Since version Vennerable version 3 it supports up to 9 datasets in battle mode. Wrapper version 1.2 and up support output in svg, pdf and png.

-----

**Input**

It takes a tabular file containing identifiers. Matches will be calculated automatically.

Be sure to specify headers if you haven't any in your dataset! Otherwise the top row of data will be excluded.

::
 
 DataA	DataB	DataC	DataD
 HUM1	AGK2	AGK2	RTT3
 AGK2	ZZE3	ERT3	ZPD3
 ZPD3	AAW3	RTT3	WER2
 WER2	HUM1	RRW4	DUM1

-----

**Example**

.. image:: VennerablePlot.png 

-----

**References**

- alex.bossers@wur.nl
- Vennerable R package: http://r-forge.r-project.org/projects/vennerable/ 

-----

.. class:: infomark

**TIP:** If your data is not TAB delimited, use *Text Manipulation-&gt;Convert*


  </help>
</tool>
