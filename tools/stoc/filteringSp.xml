<tool id="stoceps_filteringsp" name="Filter species" version="@VERSION@">
    <description>with rare and low abundances</description>
    <macros>
        <import>stoceps_macros.xml</import>
    </macros>
    <expand macro="reshape2_requirements"/>
    <command detect_errors="exit_code"><![CDATA[
        Rscript 
         '$__tool_directory__/ExeFilteringRareLowabundSPGalaxy.r' 
         '$input'
         '$__tool_directory__/FunctTrendSTOCGalaxy.r' 
	 '$output'
    ]]>
    </command>
    <inputs>
        <param name="input" type="data" format="tabular" label="Preprocessed Stoc input file" help="Output file from the 'Preprocess population data tool'"/>
    </inputs>
    <outputs>
        <data name="output" from_work_dir="Datafilteredfortrendanalysis.tabular" format="tabular"/>
    </outputs>
    <tests>
        <test> 
            <param name="input" value="Datatransformedforfiltering_trendanalysis.tabular"/>
            <output name="output" file="Datafilteredfortrendanalysis.tabular"/>
        </test>
    </tests>
    <help><![CDATA[
=================================================
STOC Filter species with rare and low abundances
=================================================

**What it does**

The filtering steps remove species with not enough data to perform accurate analyzes.

|

**Input description**

A tabular file with species count shaped with the stocs 'Preprocess population data' tool. 

The table needs the following structure :

+-----------+---------+--------------+--------------+--------------+
|   carre   |  annee  |  speciesId1  |  speciesId2  |  speciesIdN  |
+===========+=========+==============+==============+==============+
| carreId1  |   2019  |     abund    |    abund     |    abund     |
+-----------+---------+--------------+--------------+--------------+
|    ...    |   ...   |     ...      |     ...      |     ...      | 
+-----------+---------+--------------+--------------+--------------+

|

**Output**

A tabular file transformed, the rarest species are removed.

Data are ready for population trend analyzes.

|

**Source**

Publications ? 
@Romain mail 
  ]]></help>
</tool>
